<p-autoComplete
    [suggestions]="suggestions"
    field="title"
    placeholder="Search recipe"
    (completeMethod)="search($event)"
    (onSelect)="navigateToRecipePage($event)"
></p-autoComplete>

<div class="random-picker">
    <p-overlayPanel #op (onHide)="randomSuggestion = undefined">
        <div *ngIf="randomSuggestion" (click)="navigateToRecipePage(randomSuggestion)">
            <ng-container *ngTemplateOutlet="recipeCard; context: { $implicit: randomSuggestion }"></ng-container>
        </div>
    </p-overlayPanel>
    <p-button (click)="pickRandom(op, $event)">
        <i class="material-symbols-outlined">how_to_vote</i> <span>Random picker</span>
    </p-button>    
</div>

<div class="by-cuisine">
    <h2>Find recipes by cuisine</h2>
    <p-chip *ngFor="let cuisine of cuisines"
        class="clickable"
        [ngClass]="isSelectedCuisine(cuisine) ? 'highlight' : ''"
        (click)="onSelectCuisine(cuisine)">
        <div class="chip-content">
            <span>{{ cuisine | titlecase }}</span>
            <i *ngIf="isSelectedCuisine(cuisine)" class="material-symbols-outlined" (click)="deselectCuisine($event)">Cancel</i>
        </div>
    </p-chip>

    <div *ngIf="selectedCuisine" class="carousel">
        <div class="card" *ngFor="let recipe of cuisineRecipes">
            <ng-container *ngTemplateOutlet="recipeCard; context: { $implicit: recipe }"></ng-container>
        </div>
    </div>
</div>

<div class="by-hashtag">
    <h2>Find recipes by categories</h2>
    <p-multiSelect
        [options]="hashtags"
        [(ngModel)]="selectedHashtags"
        (ngModelChange)="onHashtagsChange()"
        display="chip"
        [showClear]="true"
        placeholder="Select categories"
    ></p-multiSelect>

    <div *ngIf="selectedHashtags?.length" class="carousel">
        <div class="card" *ngFor="let recipe of hashtagRecipes">
            <ng-container *ngTemplateOutlet="recipeCard; context: { $implicit: recipe }"></ng-container>
        </div>
    </div>
</div>

<ng-template #recipeCard let-recipe>
    <div class="recipe-card" (click)="navigateToRecipePage(recipe)">
        <img src="assets/photos/chinese-cabbage-tofu-minced-pork-soup.jpeg" [alt]="recipe.title"/>
        <h4>{{ recipe.title }}</h4>
        <p-tag *ngFor="let tag of recipe.hashtags" [value]="tag" severity="info"></p-tag>
    </div>
</ng-template>

<!-- <div style="width: 100%; height: 100%;">
    style="width: 100%; height: 500px;">
    <as-split direction="horizontal" [useTransition]="true">
        <as-split-area [size]="60">
            <recipes-list [recipes]="recipes" [selectedRecipeId]="selectedRecipeId" (select)="onSelectRecipe($event)"></recipes-list>
        </as-split-area>
        <as-split-area [size]="40" [visible]="!!selectedRecipe">
            <app-recipe *ngIf="selectedRecipe" [recipe]="selectedRecipe" (close)="onClose()"></app-recipe>
        </as-split-area>
    </as-split>
</div> -->