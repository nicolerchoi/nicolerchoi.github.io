<mat-form-field class="full-width" appearance="outline">
    <mat-label>Steps</mat-label>
    <textarea matInput formControlName="steps"></textarea>
</mat-form-field>


<mat-table formArrayName="ingredients" [dataSource]="ingredientControlDataSource">
    <ng-container matColumnDef="quantity">
        <mat-header-cell *matHeaderCellDef>Quantity</mat-header-cell>
        <mat-cell *matCellDef="let element" [formGroup]="element">
            <mat-form-field floatLabel="never">
                <input matInput type="number" formControlName="quantity" required>
            </mat-form-field>
        </mat-cell>
    </ng-container>
    
    <ng-container matColumnDef="unit">
        <mat-header-cell *matHeaderCellDef>Unit</mat-header-cell>
        <mat-cell *matCellDef="let element" [formGroup]="element">
            <mat-form-field floatLabel="never">
                <mat-select formControlName="unit" required>
                    <mat-option *ngFor="let unit of unitOptions" [value]="unit">
                        {{ unit }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="ingredient">
        <mat-header-cell *matHeaderCellDef>Ingredient</mat-header-cell>
        <mat-cell *matCellDef="let element" [formGroup]="element">
            <mat-form-field floatLabel="never">
                <input matInput formControlName="ingredient" required>
            </mat-form-field>
        </mat-cell>
    </ng-container>

    <ng-container matColumnDef="tools">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let i = index">
            <button mat-icon-button (click)="onDeleteIngredient(i)"><mat-icon>delete</mat-icon></button>
        </td>
    </ng-container>

      <mat-header-row *matHeaderRowDef="ingredientsTableColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: ingredientsTableColumns;"></mat-row>    
</mat-table>